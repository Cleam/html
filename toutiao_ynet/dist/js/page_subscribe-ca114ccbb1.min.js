$(function(){function a(){this.init()}FastClick.attach(document.body);var n=$("#J_up_list"),e=$("#J_down_list"),t=new WebStorageCache;a.prototype={init:function(){var a=this;n.on("click","a",function(){var n=$(this),s=n.data("type"),l=n.text();n.hasClass("disable")||(n.parent().remove(),e.append('<li class="down-item"><a data-type="'+s+'">'+l+"</a></li>"),a.updateMyChannels(),t.set("custom_channels",1))}),e.on("click","a",function(){var e=$(this),s=e.data("type"),l=e.text();e.parent().remove(),n.append('<li class="down-item"><a data-type="'+s+'">'+l+"</a></li>"),a.updateMyChannels(),t.set("custom_channels",1)}),$.ajax({url:"http://m.toutiao.ynet.com/data/channels.json",dataType:"json",success:function(n){var e=n.channels,s=e.up,l=e.down,i=s.concat(l),o=t.get("news_channels"),c=null,r=null;o?(r=a.getChannels(i,o),o=r.myChannels,c=r.recChannels):(o=s,c=l),a.generateChannelsDom(o,c),t.set("news_channels",o)},error:function(){console.error(arguments)}})},generateChannelsDom:function(a,t){var s=0,l="",i="";for(s=0;s<a.length;s++)l+="toutiao"==a[s].name||"weikandian"==a[s].name?'<li class="up-item"><a class="disable" data-type="'+a[s].name+'">'+a[s].value+"</a></li>":'<li class="up-item"><a data-type="'+a[s].name+'">'+a[s].value+"</a></li>";for(s=0;s<t.length;s++)i+='<li class="down-item"><a data-type="'+t[s].name+'">'+t[s].value+"</a></li>";n.html(l),e.html(i)},updateMyChannels:function(){var a=[];n.find("a").each(function(){var n=$(this),e={name:n.data("type"),value:n.text()};a.push(e)}),t.set("news_channels",a)},getChannels:function(a,n){var e=new Array,t=new Array,s=n.length,l=a.length,i=new Array,o=0;for(o=0;s>o;o++)for(var c=0;l>c;c++)n[o].name==a[c].name&&(e.push(n[o]),i.push(c));for(o=0;l>o;o++)i.contains(o)||t.push(a[o]);return{myChannels:e,recChannels:t}}},new a});